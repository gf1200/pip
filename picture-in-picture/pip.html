<style>
  video {
    background: #1e2327;
    border-radius: 4px;
    width: 500px;
  }
  button {
    margin: 4px 0;
  }
</style>

<video
  id="video"
  controls
  playsinline
  src="https://storage.googleapis.com/media-session/caminandes/short.mp4"
  poster="https://storage.googleapis.com/media-session/caminandes/artwork-512.png"
></video>

<script>
  const video = document.getElementById('video');
  
  window.addEventListener('message', async function(event) {
    console.log('Toggling Picture-in-Picture...');
    try {
  
      if (video !== document.pictureInPictureElement)
        await video.requestPictureInPicture();
      else
        await document.exitPictureInPicture();
  
    } catch(error) {
      log(`> Argh! ${error}`);
    } finally {
      console.log('finally...)
    }
  }
);

</script>
